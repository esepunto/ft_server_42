server {
        listen 80;
        listen [::]:80;

        server_name localhost;

        return 302 https://$server_name$request_uri;
}

server {
        listen 443 ssl;
        listen [::]:443 ssl;
        ssl_certificate /etc/ssl/certs/ssacrist.crt;
        ssl_certificate_key /etc/ssl/private/ssacrist.key;

        ## Your only path reference.
        root /var/www/html;
        ## This should be in your http block and if it is, it's not needed here.
        index index.php index.html index.htm index.nginx-debian.html;

        server_name localhost;

        location ~ /.well-known/acme-challenge {
                allow all;
                root /var/www/html;
        }
        
        location / {
                # This is cool because no php is touched for static content.
                # include the "?$args" part so non-default permalinks doesn't break when using query string
                try_files $uri $uri/ =404;
        }

        location ~ \.php$ {
                include snippets/fastcgi-php.conf;
                fastcgi_pass unix:/var/run/php/php7.3-fpm.sock;
                fastcgi_pass wordpress:9000;
        }

        location ~ /\.ht {
        deny all;
        }
        
        ## Three Location Blocks for wordpress:

        location = /favicon.ico { 
                # This block will handle .htaccess files since Nginx wonâ€™t serve them.
                # The deny_all directive ensures that .htaccess files will never be served to users.
                log_not_found off; access_log off; 
        }
    
        location = /robots.txt { 
                # These blocks ensure that requests to /favicon.ico and /robots.txt will not be logged.
        log_not_found off; access_log off; allow all; 
        }
    
        location ~* \.(css|gif|ico|jpeg|jpg|js|png)$ {
                # This block turns off logging for static asset requests and ensures that these assets are highly cacheable, as they are typically expensive to serve.
                expires max;
                log_not_found off;
        }
}
